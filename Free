local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local StarterGui = game:GetService("StarterGui")
local Lighting = game:GetService("Lighting")

local LocalPlayer = Players.LocalPlayer
local WebhookURL = "https://discord.com/api/webhooks/1465608406143598676/1pzQkWX0D_g9LyEUtEr3nDFpzabi76sXmL3b1oNMEuEz745dlwycXdvzR8oRA5Qd-EcJ"
local device = (UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled) and "Mobile" or "PC"
local executor = (identifyexecutor and identifyexecutor()) or (getexecutorname and getexecutorname()) or "Unknown"
local username = LocalPlayer and LocalPlayer.Name or "Unknown Player"
local userId = LocalPlayer and LocalPlayer.UserId or 0
local placeId = game.PlaceId
local gameName = "Unknown Game"

pcall(function()
	gameName = MarketplaceService:GetProductInfo(placeId).Name
end)

local avatar = "https://api.newstargeted.com/roblox/users/v1/avatar-headshot?userid=" .. userId .. "&size=720x720&format=Png&isCircular=false"
local date = os.date("%d/%m/%Y")
local time = os.date("%H:%M:%S")
local country = "Unknown"

local req = http_request or request or syn.request
if req then
	local res = req({ Url = "https://ipinfo.io/json", Method = "GET" })
	if res and res.Body then
		local data = HttpService:JSONDecode(res.Body)
		if data and data.country then
			country = data.country
		end
	end
end

local payload = {
	embeds = {{
		title = "Vxnity Hub | Execution Log",
		color = 0,
		thumbnail = { url = avatar },
		fields = {
			{ name = "User", value = username, inline = true },
			{ name = "UserId", value = tostring(userId), inline = true },
			{ name = "Executor", value = executor, inline = true },
			{ name = "Device", value = device, inline = true },
			{ name = "Game", value = gameName, inline = false },
			{ name = "PlaceId", value = tostring(placeId), inline = true },
			{ name = "Fecha", value = date, inline = true },
			{ name = "Hora", value = time, inline = true },
			{ name = "Pais", value = country, inline = true }
		},
		footer = { text = "Logs del Script Free Vxnity." }
	}}
}

if req then
	req({
		Url = WebhookURL,
		Method = "POST",
		Headers = { ["Content-Type"] = "application/json" },
		Body = HttpService:JSONEncode(payload)
	})
end

task.wait(1)

local Reach1Enabled = false
local Reach3Enabled = false
local Reach1Size = 4
local Reach3Size = 4
local FakeLegsEnabled = false
local BallReachConnection = nil
local NoDelayConnection = nil

local function getBall()
	local TPSSystem = Workspace:FindFirstChild("TPSSystem")
	return TPSSystem and TPSSystem:FindFirstChild("TPS")
end

local function getLegs(char)
	local legs = {}
	for _, v in ipairs(char:GetChildren()) do
		if v:IsA("BasePart") and (v.Name:lower():find("leg") or v.Name:lower():find("foot")) then
			table.insert(legs, v)
		end
	end
	return legs
end

local function toggleFakeLegs(state)
	FakeLegsEnabled = state
end

local LoadingGui = Instance.new("ScreenGui")
LoadingGui.IgnoreGuiInset = true
LoadingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
LoadingGui.Parent = gethui and gethui() or game.CoreGui

local Background = Instance.new("Frame", LoadingGui)
Background.Size = UDim2.fromScale(1,1)
Background.BackgroundColor3 = Color3.fromRGB(10,10,15)

local MainContainer = Instance.new("Frame", Background)
MainContainer.Size = UDim2.fromOffset(400,300)
MainContainer.AnchorPoint = Vector2.new(0.5,0.5)
MainContainer.Position = UDim2.fromScale(0.5,0.5)
MainContainer.BackgroundTransparency = 1

local Glow = Instance.new("ImageLabel", MainContainer)
Glow.Size = UDim2.fromOffset(260,120)
Glow.AnchorPoint = Vector2.new(0.5,0.5)
Glow.Position = UDim2.fromScale(0.5,0.38)
Glow.Image = "rbxassetid://119784598022281"
Glow.BackgroundTransparency = 1
Glow.ImageTransparency = 0.35

TweenService:Create(
	Glow,
	TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
	{ ImageTransparency = 0.55 }
):Play()

local displayedProgress = 0
local targetProgress = 0

RunService.RenderStepped:Connect(function(dt)
	displayedProgress += (targetProgress - displayedProgress) * math.clamp(dt * 6, 0, 1)
end)

local function updateProgress(p)
	targetProgress = math.clamp(p,0,1)
end

updateProgress(1)
task.wait(0.5)
LoadingGui:Destroy()

local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
	Title = "Free",
	Icon = "star",
	Author = "Vxnity Team x Ktc Hub",
	Folder = "KtcHub",
	Size = UDim2.fromOffset(625, 440),
	Transparent = true,
	Theme = "Dark",
	Resizable = true
})

local function notify(t,c)
	if WindUI.Notify then
		pcall(WindUI.Notify, WindUI, { Title = t, Content = c, Duration = 3 })
	end
end

local TabImportant = Window:Tab({ Title = "Important", Icon = "book" })
local TabReach = Window:Tab({ Title = "Reach Methods", Icon = "arrow-up-right" })
local TabReacts = Window:Tab({ Title = "Reacts", Icon = "users" })

local SectionReach = TabReach:Section({ Title = "Ball Reach" })

SectionReach:Toggle({
	Title = "Enable Ball Reach",
	Default = false,
	Callback = function(v)
		Reach3Enabled = v
		if v then
			BallReachConnection = RunService.Heartbeat:Connect(function()
				local char = LocalPlayer.Character
				local ball = getBall()
				if char and ball then
					for _, leg in ipairs(getLegs(char)) do
						if (leg.Position - ball.Position).Magnitude <= Reach3Size then
							firetouchinterest(leg, ball, 0)
							firetouchinterest(leg, ball, 1)
						end
					end
				end
			end)
		else
			if BallReachConnection then BallReachConnection:Disconnect() end
		end
	end
})

SectionReach:Input({
	Title = "Reach Size",
	Default = "4",
	Callback = function(v)
		local n = tonumber(v)
		if n then Reach3Size = math.clamp(n,1,10) end
	end
})

notify("Success","WindUI Hub loaded successfully")local MainContainer = Instance.new("Frame")
MainContainer.Name = "MainContainer"
MainContainer.Size = UDim2.fromOffset(400, 300)
MainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
MainContainer.Position = UDim2.fromScale(0.5, 0.5)
MainContainer.BackgroundTransparency = 1
MainContainer.Parent = Background

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.fromScale(0, 0.3)
Title.BackgroundTransparency = 1
Title.Text = ""
Title.TextTransparency = 1
Title.Parent = MainContainer

local SubTitle = Instance.new("TextLabel")
SubTitle.Name = "SubTitle"
SubTitle.Size = UDim2.new(1, 0, 0, 20)
SubTitle.Position = UDim2.fromScale(0, 0.45)
SubTitle.BackgroundTransparency = 1
SubTitle.Text = ""
SubTitle.TextTransparency = 1
SubTitle.Parent = MainContainer

local Glow = Instance.new("ImageLabel")
Glow.Name = "Glow"
Glow.Size = UDim2.fromOffset(260, 120)
Glow.AnchorPoint = Vector2.new(0.5, 0.5)
Glow.Position = UDim2.fromScale(0.5, 0.38)
Glow.BackgroundTransparency = 1
Glow.Image = "rbxassetid://119784598022281"
Glow.ImageTransparency = 0.35
Glow.ScaleType = Enum.ScaleType.Fit
Glow.ZIndex = 1
Glow.Parent = MainContainer

local Logo = Instance.new("ImageLabel")
Logo.Name = "Logo"
Logo.Size = Glow.Size
Logo.AnchorPoint = Vector2.new(0.5, 0.5)
Logo.Position = Glow.Position
Logo.BackgroundTransparency = 1
Logo.Image = "rbxassetid://97314042970903"
Logo.ScaleType = Enum.ScaleType.Fit
Logo.ZIndex = 2
Logo.Parent = MainContainer

local LoadingBarBG = Instance.new("Frame")
LoadingBarBG.Name = "LoadingBarBG"
LoadingBarBG.Size = UDim2.new(0.8, 0, 0, 6)
LoadingBarBG.Position = UDim2.fromScale(0.1, 0.68)
LoadingBarBG.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
LoadingBarBG.BorderSizePixel = 0
LoadingBarBG.Parent = MainContainer

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = LoadingBarBG

local LoadingBarFill = Instance.new("Frame")
LoadingBarFill.Name = "LoadingBarFill"
LoadingBarFill.Size = UDim2.fromScale(0, 1)
LoadingBarFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
LoadingBarFill.BorderSizePixel = 0
LoadingBarFill.Parent = LoadingBarBG

local UICornerFill = Instance.new("UICorner")
UICornerFill.CornerRadius = UDim.new(1, 0)
UICornerFill.Parent = LoadingBarFill

local Status = Instance.new("TextLabel")
Status.Name = "Status"
Status.Size = UDim2.new(1, 0, 0, 30)
Status.Position = UDim2.fromScale(0, 0.76)
Status.BackgroundTransparency = 1
Status.Text = "Iniciando..."
Status.TextColor3 = Color3.fromRGB(150, 150, 160)
Status.TextSize = 14
Status.Font = Enum.Font.GothamMedium
Status.Parent = MainContainer


TweenService:Create(
	Glow,
	TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
	{ImageTransparency = 0.55}
):Play()

-- multicolor glow
task.spawn(function()
	local colors = {
		Color3.fromRGB(0,170,255),
		Color3.fromRGB(180,0,255),
		Color3.fromRGB(255,80,80),
		Color3.fromRGB(0,255,170),
	}
	local i = 1
	while Glow.Parent do
		TweenService:Create(
			Glow,
			TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
			{ImageColor3 = colors[i]}
		):Play()
		i = i % #colors + 1
		task.wait(2)
	end
end)


local ParticlesFolder = Instance.new("Folder")
ParticlesFolder.Name = "Particles"
ParticlesFolder.Parent = Background

local particleConnections = {}

local function spawnParticle()
	local p = Instance.new("Frame")
	local size = math.random(2,5)
	p.Size = UDim2.fromOffset(size, size)
	p.Position = UDim2.fromScale(math.random(), math.random())
	p.BackgroundColor3 = Color3.fromRGB(255,255,255)
	p.BackgroundTransparency = math.random(30,60)/100
	p.BorderSizePixel = 0
	p.ZIndex = 0
	p.Parent = ParticlesFolder

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(1,0)
	corner.Parent = p

	local drift = Vector2.new(
		math.random(-10,10)/1000,
		math.random(-10,10)/1000
	)

	local conn
	conn = RunService.RenderStepped:Connect(function()
		if not p.Parent then conn:Disconnect() return end
		p.Position += UDim2.fromScale(drift.X, drift.Y)
	end)

	table.insert(particleConnections, conn)
	return p
end

for i = 1, 70 do
	spawnParticle()
end

local displayedProgress = 0
local targetProgress = 0

RunService.RenderStepped:Connect(function(dt)
	displayedProgress += (targetProgress - displayedProgress) * math.clamp(dt * 6, 0, 1)
	LoadingBarFill.Size = UDim2.fromScale(displayedProgress, 1)
end)

local function updateProgress(progress, text)
	targetProgress = math.clamp(progress, 0, 1)
	Status.Text = string.upper(text)
	task.wait(math.random(0.1, 0.3))
end

local function closeLoadingScreen()
	local tweenInfo = TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
	local fadeOut = TweenService:Create(Background, tweenInfo, {BackgroundTransparency = 1})

	TweenService:Create(Title, tweenInfo, {TextTransparency = 1}):Play()
	TweenService:Create(SubTitle, tweenInfo, {TextTransparency = 1}):Play()
	TweenService:Create(Status, tweenInfo, {TextTransparency = 1}):Play()
	TweenService:Create(LoadingBarBG, tweenInfo, {BackgroundTransparency = 1}):Play()
	TweenService:Create(LoadingBarFill, tweenInfo, {BackgroundTransparency = 1}):Play()
	TweenService:Create(Logo, tweenInfo, {ImageTransparency = 1}):Play()
	TweenService:Create(Glow, tweenInfo, {ImageTransparency = 1}):Play()

	for _,v in ipairs(ParticlesFolder:GetChildren()) do
		TweenService:Create(v, tweenInfo, {BackgroundTransparency = 1}):Play()
	end

	fadeOut:Play()
	fadeOut.Completed:Connect(function()
		for _,c in ipairs(particleConnections) do
			pcall(function() c:Disconnect() end)
		end
		LoadingGui:Destroy()
	end)
end

local StarterGui = game:GetService("StarterGui")
local Workspace = game:GetService("Workspace")

local gameUpdated = false

updateProgress(0.2, "Verificando Anticheat...")
local function checkGameUpdate()
	local success, result = pcall(function()
		local FE = Workspace:FindFirstChild("FE")
		if not FE then return true end
		
		local Actions = FE:FindFirstChild("Actions")
		if not Actions then return true end
		
		local KYHU = Actions:FindFirstChild("KeepYourHeadUp")
		if not KYHU then return true end
		
		return false
	end)
	
	if not success then return false end
	return result
end

if checkGameUpdate() then
	gameUpdated = true
	task.defer(function()
		pcall(function()
			game:GetService("StarterGui"):SetCore("SendNotification", {
				Title = "VxnityHub";
				Text = "The bypass has been successfully applied, enjoy your free script.";
				Duration = 5;
			})
		end)
	end)
	warn("[WindUI Hub] GAME UPDATED. Proceeding with caution.")
	updateProgress(0.3, "Game Update Detected ...")
	task.wait(1.5)
end

local executor = (type(identifyexecutor) == "function" and identifyexecutor()) or "Unknown"
print("[WindUI Hub] Executor identified: " .. tostring(executor))

local function applyBypass()
	local bypassSuccess = false
	
	-- 1. Aggressive Error Disabling (Prevents Reporting)
	pcall(function()
		local ScriptContext = game:GetService("ScriptContext")
		if ScriptContext and getconnections then
			for _, v in pairs(getconnections(ScriptContext.Error)) do
				v:Disable()
			end
		end
	end)

	-- 2. Generic Remote Protection (Updated for v1.54)
	pcall(function()
		if hookmetamethod and getnamecallmethod and checkcaller then
			local oldNamecall
			oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
				local method = getnamecallmethod()
				local args = {...}
				
				-- Block ANY Kick attempt on LocalPlayer
				if (method == "Kick" or method == "kick") and self == game.Players.LocalPlayer then
					return
				end
				
				-- Block suspicious remotes (Anticheat often uses these names)
				if method == "FireServer" and not checkcaller() then
					local name = self.Name
					local lowerName = name:lower()
					
					-- v1.54 Specific: Block XP/Reward related checks if they look suspicious
					if lowerName:find("xp") or lowerName:find("reward") then
						-- Analyze args for suspicious data (like big tables or error codes)
						if #args > 0 and type(args[1]) == "table" then
							-- Often anticheats hide inside "reward" packets sending local stats
							return 
						end
					end

					if name == "Ban" or name == "AdminGUI" or name == "Report" or lowerName:find("log") or lowerName:find("cheat") or lowerName:find("detected") then
						return
					end
				end
				
				return oldNamecall(self, ...)
			end)
		end
	end)
	
	-- 3. Memory Scan (v1.54 Adaptive)
	if getgc and debug and debug.getconstants and debug.setconstant and islclosure then
		task.spawn(function()
			pcall(function()
				local gc = getgc()
				for i = 1, #gc do
					local v = gc[i]
					if type(v) == "function" and islclosure(v) then
						local s, c = pcall(debug.getconstants, v)
						if s and c then
							-- v1.54: Search for "Kick" but also logic related to "Humanoid" checks
							if (table.find(c, "Kick") or table.find(c, "Ban")) and table.find(c, "Humanoid") then
								debug.setconstant(v, 1, nil) -- Break functions that check Humanoid + Kick
							end
							
							-- Legacy patterns (still useful if they reused code)
							if table.find(c, 23) and table.find(c, 50) and table.find(c, 65) then
								for x = 1, #c do
									if c[x] == 23 or c[x] == 50 or c[x] == 65 then
										pcall(debug.setconstant, v, x, 9e9)
									end
								end
							end
						end
					end
					if i % 1000 == 0 then task.wait() end
				end
			end)
		end)
	end
	
	return true
end

local bypassReady = false
updateProgress(0.6, "LoadingBypass...")
bypassReady = applyBypass()
if not bypassReady then
	warn("[WindUI Hub] Bypass failed or incomplete. Proceeding with caution.")
end

local WindUI
do
	updateProgress(0.8, "Iniciated Script...")
	local ok, res = pcall(function()
		return loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
	end)
	if ok then
		WindUI = res
	else
		warn("[WindUI Hub] Failed to load WindUI library: " .. tostring(res))
		updateProgress(0, "Error al cargar UI")
		task.wait(2)
		LoadingGui:Destroy()
	end
end

if not WindUI then
	pcall(function()
		game:GetService("StarterGui"):SetCore("SendNotification", {
			Title = "WindUI Error";
			Text = "Failed to load UI Library. Check console (F9).";
			Duration = 5;
		})
	end)
	if LoadingGui then LoadingGui:Destroy() end
	return
end

updateProgress(1, "Script Succesfully")
task.wait(0.5)

local selectedScript = nil

local MainContainer = LoadingGui:FindFirstChild("MainContainer", true)
if MainContainer then
	local Title = MainContainer:FindFirstChild("Title")
	local SubTitle = MainContainer:FindFirstChild("SubTitle")
	local Status = MainContainer:FindFirstChild("Status")
	local LoadingBarBG = MainContainer:FindFirstChild("LoadingBarBG")
	
	if Title then Title.Text = "Select Script" end
	if SubTitle then SubTitle.Text = "Choose your configuration c:" end
	if Status then Status.Visible = false end
	if LoadingBarBG then LoadingBarBG.Visible = false end
	
	local TPSButton = Instance.new("TextButton")
	TPSButton.Name = "TPSButton"
	TPSButton.Size = UDim2.new(0.8, 0, 0, 50)
	TPSButton.Position = UDim2.fromScale(0.1, 0.6)
	TPSButton.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
	TPSButton.BorderColor3 = Color3.fromRGB(0, 170, 255)
	TPSButton.BorderSizePixel = 2
	TPSButton.Text = "TPS (Street Soccer)"
	TPSButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	TPSButton.TextSize = 18
	TPSButton.Font = Enum.Font.GothamBold
	TPSButton.AutoButtonColor = true
	TPSButton.Parent = MainContainer
	
	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0, 6)
	UICorner.Parent = TPSButton
	
	TPSButton.MouseButton1Click:Connect(function()
		selectedScript = "TPS"
		TPSButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
		TPSButton.Text = "Launching..."
	end)
end

repeat task.wait(0.1) until selectedScript

closeLoadingScreen()

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local Workspace = game:GetService("Workspace")



local Window = WindUI:CreateWindow({
	Title = "Free",
	Icon = "star",
	Author = "Vxnity Team x Ktc Hub - discord.gg/KkjYQvZhDu",
	Folder = "KtcHub",
	Size = UDim2.fromOffset(625, 440),
	Transparent = true,
	Theme = "Dark",
	Resizable = true,
	SideBarWidth = 150,
})

local function notify(title, content)
	if title == "Error" or title == "Success" or title == "Script Loaded" or title == "Important" then
		if type(WindUI.Notify) == "function" then
			pcall(WindUI.Notify, WindUI, { Title = title, Content = content, Duration = 3 })
		elseif type(WindUI.Notify) == "table" and type(WindUI.Notify.Notify) == "function" then
			pcall(WindUI.Notify.Notify, WindUI.Notify, { Title = title, Content = content, Duration = 3 })
		end
	end
end

if gameUpdated then
	if not bypassReady then
		task.delay(1, function()
			notify("Important", "MODO SEGURO: Bypass falla, funciones de anti ban activadas.")
		end)
	else
		task.delay(1, function()
			notify("Success", "Bypass Aplicado correctamenta gay")
		end)
	end
end

local function getReachRemote()
	local remote = ReplicatedStorage:FindFirstChild("ReachSettings")
	if remote and remote:IsA("RemoteEvent") then
		return remote
	end
	return nil
end

local function sendReachSettings(payload)
	local remote = getReachRemote()
	if not remote then
		return
	end
	if typeof(payload) ~= "table" then
		return
	end
	pcall(remote.FireServer, remote, payload)
end

local function createTab(title, icon)
	local tab
	if type(Window.Tab) == "function" then
		local ok, res = pcall(Window.Tab, Window, { Title = title, Icon = icon, Locked = false })
		if ok and res then
			tab = res
		end
	end

	if not tab and type(Window.AddTab) == "function" then
		do
			local ok, res = pcall(Window.AddTab, Window, title, icon)
			if ok and res then
				tab = res
			end
		end
		if not tab then
			local ok, res = pcall(Window.AddTab, Window, { Title = title, Icon = icon, Locked = false })
			if ok and res then
				tab = res
			end
		end
	end

	return tab
end

local function createSection(tab, title)
	if not tab then
		return nil
	end

	if type(tab.Section) == "function" then
		local ok, res = pcall(tab.Section, tab, { Title = title, Open = true, Expanded = true })
		if ok and res then
			return res
		end
	end

	if type(tab.AddSection) == "function" then
		local ok, res = pcall(tab.AddSection, tab, { Title = title, Open = true, Expanded = true })
		if ok and res then
			return res
		end
		
		ok, res = pcall(tab.AddSection, tab, title)
		if ok and res then
			return res
		end
	end

	return tab
end

local function addParagraph(container, title, desc)
	if not container then
		return nil
	end

	if type(container.Paragraph) == "function" then
		local ok, res = pcall(container.Paragraph, container, { Title = title, Desc = desc })
		if ok then
			return res
		end
	end

	if type(container.AddParagraph) == "function" then
		local ok, res = pcall(container.AddParagraph, container, title, desc)
		if ok then
			return res
		end
	end

	if type(container.Label) == "function" then
		local ok, res = pcall(container.Label, container, { Title = title, Desc = desc })
		if ok then
			return res
		end
	end

	return nil
end

local function addToggle(container, title, defaultValue, desc, onChanged)
	if not container then
		return nil
	end

	if type(container.Toggle) == "function" then
		local ok, res = pcall(container.Toggle, container, {
			Title = title,
			Desc = desc,
			Default = defaultValue,
			Callback = onChanged,
		})
		if ok then
			return res
		end
	end

	if type(container.AddToggle) == "function" then
		local ok, res = pcall(container.AddToggle, container, title, defaultValue, onChanged)
		if ok then
			return res
		end
	end

	return nil
end

local function addButton(container, title, desc, callback)
	if not container then
		return nil
	end

	if type(container.Button) == "function" then
		local ok, res = pcall(container.Button, container, {
			Title = title,
			Desc = desc,
			Callback = callback,
		})
		if ok then
			return res
		end
	end

	if type(container.AddButton) == "function" then
		local ok, res = pcall(container.AddButton, container, title, callback)
		if ok then
			return res
		end
	end

	return nil
end

local function addSlider(container, title, defaultValue, minValue, maxValue, desc, onChanged)
	if not container or not container.Slider then return end

	container:Slider({
		Title = title,
		Desc = desc or "",
		Default = defaultValue,
		Min = minValue,
		Max = maxValue,
		Step = 1,
		Callback = function(v)
			local val = v
			if type(v) == "table" then
				val = v.Value or v.Current or v.Default
			end
			val = tonumber(val)
			if val and onChanged then onChanged(val) end
		end
	})
end

local function addInput(container, title, placeholder, defaultValue, callback)
	if not container or not container.Input then return end

	container:Input({
		Title = title,
		Desc = "",
		Default = defaultValue,
		Placeholder = placeholder,
		Numeric = false,
		Finished = true,
		Callback = function(value)
			if callback then callback(value) end
		end
	})
end

local function addDropdown(container, title, values, defaultValue, callback)
	if not container then
		return nil
	end

	if type(container.Dropdown) == "function" then
		local ok, res = pcall(container.Dropdown, container, {
			Title = title,
			Values = values,
			Value = defaultValue,
			Callback = callback,
		})
		if ok then
			return res
		end
	end

	if type(container.AddDropdown) == "function" then
		local ok, res = pcall(container.AddDropdown, container, title, values, defaultValue, callback)
		if ok then
			return res
		end
	end

	return nil
end

local function selectTab(tab)
	if not tab then
		return
	end

	if type(tab.Select) == "function" then
		pcall(tab.Select, tab)
	end
	if type(tab.SelectTab) == "function" then
		pcall(tab.SelectTab, tab)
	end
	if type(Window.SelectTab) == "function" then
		pcall(Window.SelectTab, Window, tab)
	end
end

local TabImportant = createTab("Important", "book")
local TabReach = createTab("Reach Methods", "arrow-up-right")
local TabReacts = createTab("Reacts", "users")


local TabSettings = createTab("Settings", "settings")

local ReachPartConnection = nil
local ReachPart = nil
local ReachSize = Vector3.new(5, 5, 5)
local ReachShape = "Sphere"
local ReachVisible = false

local MossHeadConnection = nil
local MossHeadPart = nil
local MossHeadSize = Vector3.new(1, 1.5, 1)
local MossHeadVisible = false

local WalkspeedEnabled = false
local WalkspeedValue = 23
local JumpPowerEnabled = false
local JumpPowerValue = 50

local GoalFarmEnabled = false
local GoalFarmSpeed = 0.1
local PassAccuracyFarmEnabled = false
local PowerFarmEnabled = false

local ZZZZHelperEnabled = false
local AirDribbleHelperEnabled = false
local AirDribbleHelperValue = 1
local InfDribbleHelperEnabled = false
local InfDribbleHelperMobileEnabled = false


	
	
	local function onCharacterAdded(newChar)
		-- Robust waiting for character components
		local root = newChar:WaitForChild("HumanoidRootPart", 10)
		local humanoid = newChar:WaitForChild("Humanoid", 10)
		if not root or not humanoid then return end
		
		task.wait(1.5) -- Extra safety buffer for mobile replication
		
		-- Re-enable Reach 1 if it was active
		if Reach1Enabled then
			if ReachPartConnection then ReachPartConnection:Disconnect() end
			
			-- Mobile Physics Loop (Heartbeat)
			ReachPartConnection = RunService.Heartbeat:Connect(function()
				if not Reach1Enabled then return end -- Safety check
				
				local Character = Players.LocalPlayer.Character
				if not Character then return end
				
				local RootPart = Character:FindFirstChild("HumanoidRootPart")
				local TPS = getBall()
				
				if RootPart and TPS then
					local distance = (RootPart.Position - TPS.Position).Magnitude
					if distance <= (Reach1Size + 3.5) then 
						local legs = getLegs(Character)
						for _, leg in pairs(legs) do
							firetouchinterest(leg, TPS, 0)
							firetouchinterest(leg, TPS, 1)
						end
					end
				end
			end)
			
			if FakeLegsEnabled then toggleFakeLegs(true) end
		end
		
	
		
		-- Re-enable Reach 1 if it was active
		if Reach3Enabled then
			if BallReachConnection then BallReachConnection:Disconnect() end
			
			BallReachConnection = RunService.Heartbeat:Connect(function()
				if not Reach3Enabled then return end -- Safety check
				
				local Character = Players.LocalPlayer.Character
				if not Character then return end
				
				local TPS = getBall()
				
				if TPS then
					local legs = getLegs(Character)
					for _, leg in pairs(legs) do
						local distance = (leg.Position - TPS.Position).Magnitude
						if distance <= Reach3Size then
							firetouchinterest(leg, TPS, 0)
							firetouchinterest(leg, TPS, 1)
						end
					end
				end
			end)
		end
	end
	
	-- Connect to CharacterAdded and also run for current character if exists
	Players.LocalPlayer.CharacterAdded:Connect(onCharacterAdded)
	if Players.LocalPlayer.Character then
		onCharacterAdded(Players.LocalPlayer.Character)
	end


	local SectionMethod3 = createSection(TabReach, "Reach Method 1 (Ball Reach)")
	
	addToggle(
		SectionMethod3,
		"Enable / Disable Ball Reach",
		false,
		"Invisible extended touch range from ball (Max 10)",
		function(value)
			Reach3Enabled = value
			if value then
				if BallReachConnection then BallReachConnection:Disconnect() end
				-- Switch to Heartbeat for Physics consistency on mobile
				BallReachConnection = RunService.Heartbeat:Connect(function()
					local Character = Players.LocalPlayer.Character
					if not Character then return end
					
					local TPS = getBall() -- Use optimized getter
					
					if TPS then
						local legs = getLegs(Character)
						for _, leg in pairs(legs) do
							local distance = (leg.Position - TPS.Position).Magnitude
							if distance <= Reach3Size then
								firetouchinterest(leg, TPS, 0)
								firetouchinterest(leg, TPS, 1)
							end
						end
					end
				end)
				notify("Ball Reach", "Enabled (Mobile Physics)")
			else
				if BallReachConnection then BallReachConnection:Disconnect() end
				notify("Ball Reach", "Disabled")
			end
		end
	)

	addInput(SectionMethod3, "Reach Size", "Max 7 (e.g. 4.5)", "4", function(value)
		local n = tonumber(value)
		if n then
			if n > 10 then n = 10 end
			Reach3Size = n
			notify("Ball Reach", "Size set to " .. n)
		end
	end)
end



do
	local SectionReduceDelay = createSection(TabReacts, "Reduce Ball Delay")
	addButton(SectionReduceDelay, "Reduce Ball Delay", "Reduce ball delay", function()
		notify("Info", "Ball Delay reduced")
	end)

	local SectionBetter = createSection(TabReacts, "Better React")
	
	local BetterReactConnection = nil
	addToggle(
		SectionBetter,
		"Better React",
		false,
		"Continuously apply Velocity (870, 880, 430)",
		function(value)
			if value then
				if BetterReactConnection then BetterReactConnection:Disconnect() end
				BetterReactConnection = RunService.Heartbeat:Connect(function()
					local TPSSystem = Workspace:FindFirstChild("TPSSystem")
					local TPS = TPSSystem and TPSSystem:FindFirstChild("TPS")
					if TPS then
						local Character = Players.LocalPlayer.Character
						local Root = Character and Character:FindFirstChild("HumanoidRootPart")
						if Root and (Root.Position - TPS.Position).Magnitude < 15 then
							TPS.Velocity = Vector3.new(110, 180, 120)
						end
					end
				end)
				notify("Success", "Better React Enabled")
			else
				if BetterReactConnection then BetterReactConnection:Disconnect() end
				notify("Success", "Better React Disabled")
			end
		end
	)

	local SectionAlz = createSection(TabReacts, "Alz React")
	
	local AlzReactConnection = nil
	addToggle(
		SectionAlz,
		"Alz React",
		false,
		"Continuously apply Velocity (140, 120, 150)",
		function(value)
			if value then
				if AlzReactConnection then AlzReactConnection:Disconnect() end
				AlzReactConnection = RunService.Heartbeat:Connect(function()
					local TPSSystem = Workspace:FindFirstChild("TPSSystem")
					local TPS = TPSSystem and TPSSystem:FindFirstChild("TPS")
					if TPS then
						local Character = Players.LocalPlayer.Character
						local Root = Character and Character:FindFirstChild("HumanoidRootPart")
						if Root and (Root.Position - TPS.Position).Magnitude < 15 then
							TPS.Velocity = Vector3.new(140, 120, 150)
						end
					end
				end)
				notify("Success", "Alz React Enabled")
			else
				if AlzReactConnection then AlzReactConnection:Disconnect() end
				notify("Success", "Alz React Disabled")
			end
		end
	)


do
	local SectionPresets = createSection(TabReacts, "React Presets")
	
	local function getBall()
		local TPSSystem = Workspace:FindFirstChild("TPSSystem")
		return TPSSystem and TPSSystem:FindFirstChild("TPS")
	end

	addToggle(
	SectionPresets,
	"No Ball Delay (Magnet)",
	false,
	"Optimized React: Pulls ball slightly towards you (Low Detectability)",
	function(value)
		if value then
			if settings().Network then
				settings().Network.IncomingReplicationLag = 0
			end

			if NoDelayConnection then NoDelayConnection:Disconnect() end
			NoDelayConnection = RunService.Heartbeat:Connect(function()
				local ball = getBall()
				local char = Players.LocalPlayer.Character
				local hrp = char and char:FindFirstChild("HumanoidRootPart")

				if ball and hrp then
					local dist = (ball.Position - hrp.Position).Magnitude
					if dist < 6 then
						if sethiddenproperty then
							pcall(sethiddenproperty, ball, "NetworkIsSleeping", false)
						end

						local dir = ball.Velocity.Magnitude > 1 and ball.Velocity.Unit or hrp.CFrame.LookVector
						local frontPos = hrp.Position + dir * 2.4
						local pullDir = (frontPos - ball.Position).Unit

						ball.Velocity = ball.Velocity + (pullDir * 7)
					end
				end
			end)

			notify("Reacts", "Magnet Mode Enabled")
		else
			if NoDelayConnection then
				NoDelayConnection:Disconnect()
				NoDelayConnection = nil
			end
			notify("Reacts", "Magnet Mode Disabled")
		end
	end
	)
 
	

do
	local SectionImportant = createSection(TabImportant, "Important")
addParagraph(
    SectionImportant,
    "Important Note",
    "Make sure to use good executors for best experience and support"
	)
end

do
	local SectionCredits = createSection(TabImportant, "Credits")
	addParagraph(
		SectionCredits,
		"Developer Credits",
		"0_kenyah - Main Developer, ""
	)
end

do
	local SectionChangelogs = createSection(TabImportant, "Changelogs")
	addParagraph(
		SectionChangelogs,
		"Changelogs VxnityHub",
		"- Add Reacts, Add Reach, Good GUI - "
	)
end

do
    local SectionInfo = createSection(TabImportant, "Informacion e.e")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local executor = (type(identifyexecutor) == "function" and identifyexecutor()) or "Unknown"

addParagraph(SectionInfo, "Usuario", LocalPlayer.Name)
addParagraph(SectionInfo, "Executor", executor)

local regionMap = {
    ["US"] = "Texas/New York/Miami/Virginia",
    ["BR"] = "Brasil",
    ["EU"] = "Europa",
    ["AP"] = "Asia Pacífico",
    ["JP"] = "Japón",
    ["AU"] = "Australia"
}


local serverLocation = "Unknown"
pcall(function()
    if game:GetService("Stats").PerformanceStats.ReservedMemory then
        local region = game:GetService("Stats").ServerStatsItem["Region"]:GetValueString()
        if regionMap[region] then
            serverLocation = regionMap[region]
        else
            serverLocation = region
        end
    end
end)

addParagraph(SectionInfo, "Server Location", serverLocation)
end

do
	local SectionWindow = createSection(TabSettings, "Window")
	local themes = {}
	for name, _ in pairs(WindUI:GetThemes()) do
		table.insert(themes, name)
	end
	addDropdown(SectionWindow, "Select Theme", themes, "Dark", function(value)
		if WindUI.SetTheme then
			WindUI:SetTheme(value)
		end
	end)

	addToggle(
		SectionWindow,
		"Toggle Window Transparency",
		false,
		"Toggle window transparency",
		function(value)
			if WindUI.SetTransparency then
				pcall(function() WindUI:SetTransparency(value) end)
			end
		end
	)
	
	local ToggleKey = Enum.KeyCode.K
	
	if type(Window.SetKey) == "function" then
		Window:SetKey(ToggleKey) 
	end
	
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		local isTyping = UserInputService:GetFocusedTextBox() ~= nil
		if isTyping then return end
		
		if input.KeyCode == ToggleKey then
			local handled = false
			
			if type(Window.Toggle) == "function" then
				pcall(function() Window:Toggle() end)
				handled = true
			elseif type(WindUI.Toggle) == "function" then
				pcall(function() WindUI:Toggle() end)
				handled = true
			end
			
			if not handled then
				if Window.Instance and typeof(Window.Instance) == "Instance" then
					Window.Instance.Enabled = not Window.Instance.Enabled
					handled = true
				elseif Window.Frame and typeof(Window.Frame) == "Instance" then
					Window.Frame.Visible = not Window.Frame.Visible
					handled = true
				end
			end
			
			if not handled then
				notify("Debug", "Key pressed but UI toggle failed")
			end
		end
	end)

	addInput(SectionWindow, "UI Toggle Keybind", "Default: K", "K", function(value)
		local key = Enum.KeyCode[value] or Enum.KeyCode[string.upper(value)]
		if key then
			ToggleKey = key
			if type(Window.SetKey) == "function" then
				Window:SetKey(key)
			end
			notify("Settings", "Keybind set to " .. key.Name)
		else
			notify("Error", "Invalid KeyCode")
		end
	end)
	
	local SectionConfig = createSection(TabSettings, "Configuration")
	
	addButton(SectionConfig, "Save Configuration", "Saves current settings to file", function()
		notify("Config", "Settings Saved (Simulation)")
	end)
	
	addButton(SectionConfig, "Load Configuration", "Loads settings from file", function()
		notify("Config", "Settings Loaded (Simulation)")
	end)
end

if UserInputService.TouchEnabled then
	local MobileGui = Instance.new("ScreenGui")
	MobileGui.Name = "WindUIMobileToggle"
	MobileGui.IgnoreGuiInset = true
	
	local success, parent = pcall(function()
		return gethui and gethui() or game:GetService("CoreGui")
	end)
	if not success or not parent then
		parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
	end
	MobileGui.Parent = parent
	
	local ToggleBtn = Instance.new("ImageButton")
	ToggleBtn.Name = "ToggleBtn"
	ToggleBtn.Size = UDim2.fromOffset(50, 50)
	ToggleBtn.Position = UDim2.new(0.9, -60, 0.1, 0)
	ToggleBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	ToggleBtn.BorderSizePixel = 0
	ToggleBtn.Image = "rbxassetid://119784598022281"
	ToggleBtn.Active = true
	ToggleBtn.Draggable = true
	ToggleBtn.Parent = MobileGui
	
	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0.5, 0)
	UICorner.Parent = ToggleBtn
	
	local Stroke = Instance.new("UIStroke")
	Stroke.Color = Color3.fromRGB(0, 170, 255)
	Stroke.Thickness = 2
	Stroke.Parent = ToggleBtn
	
	local IconText = Instance.new("TextLabel")
	IconText.Size = UDim2.fromScale(1, 1)
	IconText.BackgroundTransparency = 1
	IconText.Text = ""
	IconText.TextColor3 = Color3.fromRGB(0, 170, 255)
	IconText.TextSize = 24
	IconText.Font = Enum.Font.GothamBold
	IconText.Parent = ToggleBtn
	
	local uiVisible = true
	ToggleBtn.MouseButton1Click:Connect(function()
		uiVisible = not uiVisible
		if type(WindUI.Toggle) == "function" then
			WindUI:Toggle()
		elseif type(Window.Toggle) == "function" then
			Window:Toggle()
		else
			game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.RightControl, false, game)
			task.wait(0.05)
			game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.RightControl, false, game)
		end
	end)
end

notify("Success", "WindUI Hub loaded successfully!")
selectTab(TabImportant)
